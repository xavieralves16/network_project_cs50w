{% extends "network/layout.html" %}
{% load static %}

{% block body %}
<div class="container mt-4">
    <h2>Following</h2>
    <hr>

    {% for post in posts %}
        <!-- Each post card -->
        <div class="card mb-3" data-post-id="{{ post.id }}">
            <div class="card-body">
                <h5>
                    <a href="{% url 'profile' post.user.username %}">{{ post.user.username }}</a>
                </h5>
                <!-- Add post-content class so edit.js could also work if you want -->
                <p class="post-content">{{ post.content }}</p>
                <small class="text-muted">{{ post.timestamp }}</small>

                <!-- Like/Unlike section -->
                <div class="like-section" data-post-id="{{ post.id }}" style="display: flex; align-items: center; gap: 6px; margin-top: 8px;">
                    <button class="like-btn" style="border: none; background: none; cursor: pointer; padding: 0;">
                        {% if user in post.likes.all %}
                            <span class="heart" style="font-size: 1.4rem; color: red;">♡</span>
                        {% else %}
                            <span class="heart" style="font-size: 1.4rem; color: grey;">♡</span>
                        {% endif %}
                    </button>
                    <span class="like-count">{{ post.like_count }}</span>
                </div>
            </div>
        </div>
    {% empty %}
        <p>You are not following anyone, or they haven't posted yet.</p>
    {% endfor %}
</div>

<!-- JS files -->
<script src="{% static 'network/edit.js' %}"></script>
<script src="{% static 'network/likes.js' %}"></script>
{% endblock %}
